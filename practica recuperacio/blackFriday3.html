  
<!DOCTYPE html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

</head>

<body>

    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#categoria" role="tab" aria-controls="categoria" aria-selected="true">Categoria</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#producte" role="tab" aria-controls="producte" aria-selected="false">Producte</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#compra" role="tab" aria-controls="compra" aria-selected="false">Compra</a>
        </li>
    </ul>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="categoria" role="tabpanel" aria-labelledby="categoria-tab">
            <div class="container">
                <h4 style="margin-top: 2%;">Categoria :</h4>
                <div class="row" style="margin-top: 2%;">
                    <label class="control-label col-md-2">Nom de la Categoria </label>
                    <div class="col-md-2">
                        <input type="text" name="nomCategoria" id="nomCategoria" class="form-control">
                    </div>
                    <button id="bAfegir" class="btn btn-dark"> Afegir </button>
                </div>
                <br/>
                <div class="form-row align-items-center">

                    <label class="mr-sm-2 col-md-2" for="inlineFormCustomSelect">Selecciona una categoria</label>
                    <div class="col-md-2">
                        <select class="custom-select mr-sm-2 selectLlista" id="selectLlista">
                            
                        </select>
                    </div>
                    <div class="col-md-1">
                        <button id="bModificar" class="btn btn-dark"> Modifica </button>
                    </div>
                    <button id="bBorrar" class="btn btn-dark"> Borrar </button>

                </div>

                <div id="contingut" style="margin-top: 2%;">

                </div>

            </div>


        </div>
        <div class="tab-pane fade" id="producte" role="tabpanel" aria-labelledby="producte-tab">
            <div class="container">
                <h4 style="margin-top: 2%;">Producte :</h4>
                <div class="row" style="margin-top: 2%;">

                    <label class="control-label col-md-1">Codi</label>
                    <div class="col-md-2">
                        <input type="text" name="codi" id="codi" class="form-control">
                    </div>
                    <label class="control-label col-md-1">Descripcio</label>
                    <div class="col-md-2">
                        <input type="text" name="desc" id="desc" class="form-control">
                    </div>
                </div>

                <br/>
                <div class="row">

                    <label class="control-label col-md-1">Preu</label>
                    <div class="col-md-2">
                        <input type="text" name="preu" id="preu" class="form-control">
                    </div>
                    <label class="control-label col-md-1" for="inlineFormCustomSelect">Categoria</label>
                    <div class="col-md-2">
                        <select class="custom-select mr-sm-2 selectLlista" id="selectC">
                            
                        </select>
                    </div>
                    <div class="col-md-1">
                        <button id="bAfegirP" class="btn btn-dark"> Afegir </button>
                    </div>
                </div>
                <br/>
                <div class="row">

                    <label class="control-label col-md-2" for="inlineFormCustomSelect">Tria un Producte</label>
                    <div class="col-md-2">
                        <select class="custom-select mr-sm-2" id="sproducte">
                            
                        </select>
                    </div>
                    <div class="col-md-1">
                        <button id="bModificarP" class="btn btn-dark"> Guardar </button>
                    </div>
                    <div class="col-md-1">
                        <button id="bBorrarP" class="btn btn-dark"> Borrar </button>
                    </div>
                </div>

                <div id="cont">
                    <table id="taula" class="table table-striped" style="margin-top: 2%;">
                        <thead class="thead-dark">
                            <tr>
                                <th>Codi</th>
                                <th>Descripció</th>
                                <th>Preu</th>
                                <th>Categoria</th>
                            </tr>
                        </thead>
                        <tbody>

                        </tbody>

                    </table>

                </div>

            </div>

        </div>
        <div class="tab-pane fade" id="compra" role="tabpanel" aria-labelledby="compra-tab">
            <div class="container">
                <h4 style="margin-top: 2%;">Compra :</h4>
                <div class="row" style="margin-top: 2%;">
                    <label class="control-label col-md-1" for="inlineFormCustomSelect">Categoria</label>
                    <div class="col-md-2">
                        <select class="custom-select mr-sm-2 selectLlista" id="selectCat">
                            
                        </select>
                    </div>
                    <label class="control-label col-md-1" for="inlineFormCustomSelect">Producte</label>
                    <div class="col-md-2">
                        <select class="custom-select mr-sm-2 selectProducte" id="selectPro">
                            
                        </select>
                    </div>
                    <label class="control-label col-md-1" for="inlineFormCustomSelect">Quantitat</label>
                    <div class="col-md-1">
                        <select class="custom-select mr-sm-2" id="quant">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                            
                        </select>
                    </div>
                    <div class="col-md-1">
                        <button id="bAfegirCarrito" class="btn btn-dark"> Afegir </button>
                    </div>
                    <div class="col-md-2">
                        <button id="bBorrarCarrito" class="btn btn-dark"> Borrar Tot </button>
                    </div>
                </div>
                <div class="row" style="margin-top: 2% ;">
                    <label class="control-label col-md-1">Descompte (%)</label>
                    <div class="col-md-2">
                        <input type="text" name="preu" id="InputDesc" class="form-control">
                    </div>
                    <div class="col-md-1">
                        <button id="bAplicar" class="btn btn-dark"> Aplicar </button>
                    </div>
                </div>
                <div id="contCompra">
                    <table id="taulaCompra" class="table table-striped" style="margin-top: 2%;">
                        <thead class="thead-dark">
                            <tr>
                                <th>Codi</th>
                                <th>Descripció</th>
                                <th>Preu</th>
                                <th>Categoria</th>
                                <th>Quantitat</th>
                                <th>SubTotal</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                    <table id="totals" class="table table-info">
                        <tbody>
                            <tr>
                                <th colspan="5">
                                    TOTAL
                                </th>
                                <td id="total"> 0 </td>
                            </tr>
                            <tr>
                                <th id="d" colspan="5">
                                    DESCOMPTE (%)
                                </th>
                                <td id="descompte"> 0 </td>
                            </tr>
                            <tr>
                                <th colspan="5">
                                    TOTAL - DESCOMPTE
                                </th>
                                <td id="totDesc"> 0 </td>
                            </tr>
                        </tbody>
                    </table>

                </div>

            </div>
        </div>
    </div>
    <script>
        $(document).ready(function(){

            var categoria = ['Tecnologia','Menjar','Esports'];

            // INICIAR SELECT CATEGORIA //
            function categoriaSelect(){
                var op =  "<option selected disabled>selecciona'n una</option>";

                for( i = 0;i<categoria.length;i++){
                    op += "<option>" + categoria[i] + "</option>";
                }
                $('.selectLlista').html(op);
                
            }
             
            // INICIAR LLISTA CATEGORIA //
            function categoriaList(){
                var li = "<ul class=\"list-group\">";

                for( i = 0;i<categoria.length;i++){
                    li +=  "<li class=\"list-group-item list-group-item-info\">" + categoria[i] + "</li>";
                }
                
                li += '</ul>';
                $('#contingut').html(li);


            }

            categoriaSelect();
            categoriaList();
            // AFEGIR CATEGORIA//
            
            $('#bAfegir').click(function(){
                var cat = $('#nomCategoria').val();
                categoria.push(cat);

                categoriaSelect();
                categoriaList();
            });
             
            //BORRAR CATEGROIA//

            $('#bBorrar').click(function(){

                var cat = $('.selectLlista').val();
                var index = categoria.indexOf(cat); //INDEX ALLA ON ESTA SA CATEGORIA SELECIONADA //
                categoria.splice(index,1);
                
                categoriaSelect();
                categoriaList();
            });

            //MODIFICAR CATEGORIA //

            $('#bModificar').click(function(){
                var cat = $('.selectLlista').val();
                var nou = $('#nomCategoria').val();
                var index = categoria.indexOf(cat);

                categoria[index]=nou; // AGAF S'INDEX DE SA CATEGORIA SELECIONAT I HO MODIFIC PER ES NOU //

                categoriaSelect();
                categoriaList();
            });

            //CREAM QUALQUE PORUCTE I ELS POSAM DINS UN ARRAY //

            var p1 = ['1546',"Disc dur","68.00","Tecnologia"];
            var p2 = ['4789',"Torre","100.68","Tecnologia"];
            var p3 = ["3587","Zumo Taronja","1.25","Menjar"];
            var p4 = ["54789","Sopa","2.56","Menjar"];
            var p5 = ["7489","Nike","70.89","Esports"];
            var p6 = ["1111", "Pilota", "12.00", "Esports"];

            var productes = [p1,p2,p3,p4,p5,p6];

            // CREAM SA LLILSTA DES PRODUCTES //

            function llistaProductes(){
                var taula = "<tr>";

                for( i = 0;i<productes.length;i++){
                    for(x=0;x<4;x++){ // POSAM 4 PQ SA TAULA TE 4 COLUMNES i ES PRODUCTES 4 COSES//
                       taula += '<td>';
                        taula += productes[i][x];
                        taula += '</td>'; 
                    }
                    taula += '</tr>';
                }

                $('#taula tbody').html(taula);  // DINS ES TDBODY DE S ATAULA I POSAM LO QUE HEM CREAT DINS ES FOR
            }

            llistaProductes();

            function optionProducte(){
                var op =  "<option selected disabled>selecciona'n una</option>";

                for( i = 0;i<productes.length;i++){
                    op += "<option>" + productes[i][1] + "</option>";
                }
                $('#sproducte').html(op);
                
            }

            optionProducte();

            //LLISTA OPTIONS PRODUCTE//


            // AFEGIM PRODUCTE //

            $('#bAfegirP').click(function(){
                var codi = $('#codi').val();
                var desc = $('#desc').val();
                var preu = $('#preu').val();
                var cat = $('#selectC').val();

                var prod = [codi,desc,preu,cat];
                productes.push(prod);
                llistaProductes();
                optionProducte();
            });

            $('#bBorrarP').click(function(){
                var p = $('#sproducte').val();
                
                for(i=0;i<productes.length;i++){
                    if(productes[i][1] == p){  // SI A S APOSICIO DA SA I A SA PART DES NOM ES IGUAL A NES PRODUCTE SELECIONAT // 
                        productes.splice(i,1);
                    }
                }
                llistaProductes();
                optionProducte();
            });

            // MODIFICAR PRODUCTE //
            
            $('#bModificarP').click(function(){
                var codi = $('#codi').val();
                var desc = $('#desc').val();
                var preu = $('#preu').val();
                var cat = $('#selectC').val();
                var p = $('#sproducte').val();

                for(i=0;i<productes.length;i++){
                    if(productes[i][1] == p){  // SI A S APOSICIO DA SA I A SA PART DES NOM ES IGUAL A NES PRODUCTE SELECIONAT // 
                        productes[i][0]=codi;
                        productes[i][1]=desc;
                        productes[i][2]=preu;
                        productes[i][3]=cat;
                    }
                }
                llistaProductes();
                optionProducte();

            });

            // INICIAR COMPRA //

            var total = 0;

            $('#selectCat').change(function(){
                var prodSelect = [];  // array nova des productes de sa cat q vull//
                var cat = $(this).val();

                for(i=0; i<productes.length;i++){
                    if(productes[i][3] == cat){ // POS DE 3 PQ A SA POSICIO 3 HI HA SA CATEGORIA A S'array de sproductes//
                        prodSelect.push(productes[i]); // A S'ARRAY NOVA POS TOTS ES NOMS DES PRDUCTES QUE S'AHN FLITRAT//
                    }
                }

                // UNA VEGADA FET ES NOU ARRAY CREI OPTION //
                var op =  "<option selected disabled>selecciona'n una</option>";

                for( i = 0;i<prodSelect.length;i++){
                    op += "<option>" + prodSelect[i][1] + "</option>";
                }
                $('#selectPro').html(op);
                
            });

            // AFEGIR CARRITO //

            $('#bAfegirCarrito').click(function(){
                var producte = $('#selectPro').val();
                var cant = $('#quant').val();
                var compra = [];

                for(i=0;i<productes.length;i++){
                    if(productes[i][1] == producte){
                        var suma = parseFloat(productes[i][2] * parseFloat(cant));
                        var p = [productes[i][0],productes[i][1],productes[i][2],productes[i][3],cant,suma];
                        compra.push(p);
                    }
                }

                var taulaCompra = "<tr>";
                    for( i = 0; i < compra.length; i++){
                        for ( x = 0; x < 6 ; x++){
                            taulaCompra += "<td>";
                            taulaCompra += compra[i][x];
                            taulaCompra += "</td>";
                        }
                        taulaCompra += "</tr>";
                        total = parseFloat(total) + parseFloat(compra[i][5]);
                    }
                    $('#taulaCompra tbody').append(taulaCompra);
                    $('#total').empty().append(total);
            });


        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    </body>
    </html>